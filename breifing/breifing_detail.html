<html>

<head>
    <link rel="stylesheet" type="text/css" href="css/brif_comm.css">
    <script>
        $.urlParam = function (name) {
            var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            if (results == null) {
                return null;
            }
            else {
                return results[1] || 0;
            }
        }
        onload = function () {
            var curPage = '#detail' + $.urlParam('cateId');
            var activeCate = '#categoryId' + $.urlParam('cateId');
            var activeDetail = '#categoryDetailId' + $.urlParam('detailId');
            $("#mainNavBtn02").addClass("active");
            $("#Cate03").addClass("active");
            $(curPage).css('display', 'block');
            $(activeCate).addClass("active");
            $(activeDetail).addClass("active");
        }
    </script>
</head>

<body>
    <div id="header2"><%- main_header %></div>
    <div id="header" class="container"><%- logo %></div>
    <div id="header3" class="container"><%- navigator %></div>
    <div id="header4"><%- navigator_side %></div>
    <div class="briefingContents container contentsBox">
        <div id="contentsSideNav"><%- contentsSideNav %></div>
        <div class="hotBriefing mainContents w85">
            <h2>Hot Briefings</h2>
            <table class="table hashTable">
                <tbody>
                    <%  
                        var pid=-1;
                        var string="";
                        for(var i=0; i<result.rows.length; i++){
                            if(result.rows[i][0]!=pid){
                                if(pid!=-1){
                                    //저장값출력
                                    string+="</th><td>";
                                    var count=0;
                                    for(var j=0;j<hashResult.rows.length;j++){
                                        if(hashResult.rows[j][0]==pid){
                                            count++;
                                            string+="#"+hashResult.rows[j][1]+" ";
                                            if(count==5)break;
                                        }
                                    }
                                    string+="</td></tr>";
                                %><%- string %><%
                                }
                                pid = result.rows[i][0];
                                string = "<tr class='hover-pointer hover-underline hover-bold' onclick=location.href='/breifing_view?postNo="+pid+"'><th scope='row'>";
                            }
                            string+=result.rows[i][2]+"<br>";
                        }
                        string+="</th><td>";
                        var count=0;
                        for(var j=0;j<hashResult.rows.length;j++){
                            if(hashResult.rows[j][0]==pid){
                                count++;
                                string+="#"+hashResult.rows[j][1]+" ";
                                if(count==5)break;
                            }
                        }
                        string+="</td></tr>";
                    %>
                    <%- string %>
                </tbody>
            </table>
            <div class="">
                    <%
                        var detail="";
                        if(detailId!=null)detail="detailId="+detailId+"&";

                        var paging="";
                        if(pagingResult.preBtn == '1'){
                            paging="<button class='btn btn-light' onclick=location.href='"+"/breifing_detail?"+detail+"cateId="+cateId+"&pageNo="+(parseInt(pagingResult.startPage)-1)+"'>&lt;</button>"
                        }
                    %><%- paging %><%
                        paging="";
                        for(var i=pagingResult.startPage; i<=pagingResult.endPage;i++){
                            if(i==pagingResult.curPage) paging+="<button class='btn btn-light active' onclick=location.href='"+"/breifing_detail?"+detail+"cateId="+cateId+"&pageNo="+i+"'>"+i+"</button>"
                            else paging+="<button class='btn btn-light' onclick=location.href='"+"/breifing_detail?"+detail+"cateId="+cateId+"&pageNo="+i+"'>"+i+"</button>"
                        }
                    %><%- paging %><%
                        paging="";
                        if(pagingResult.nextBtn == '1'){
                        paging="<button class='btn btn-light' onclick=location.href='"+"/breifing_detail?"+detail+"cateId="+cateId+"&pageNo="+(parseInt(pagingResult.endPage)+1)+"'>&gt;</button>"
                        }
                    %><%- paging %>
                    <div>
                        <button class='btn btn-light fr' onclick='location.href="/breifing_write"'>글쓰기</button>
                    </div>
            </div>
        </div>
    </div>
    <div id="footer"><%- footer %></div>
</body>

</html>